<!DOCTYPE html>
<html>
<head>
<title>HSSS - Stats</title>
</head>
<body>

<script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

<script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>

<script>
$(document).ready(function(){
	getAuth(function(){
		console.log("authors gotten");
	});
	getSub();
	getSent();
	console.log("end");
});


var getAuth = function(callback){
	$.get("authors",function(data){
		var mAuthCount = data.classifier.docCount.male;
		var fAuthCount = data.classifier.docCount.female;
		
		console.log(mAuthCount,fAuthCount);
		callback();
	});
};

var getSub = function(callback){
	$.get("subjects",function(data){
		var mSub = data.classifier.docCount.male_male + data.classifier.docCount.female_male;
		var fSub = data.classifier.docCount.male_female + data.classifier.docCount.female_female;
		console.log(mSub,fSub);
		if(callback)
			callback();
	});
}

var getSent = function(callback){
	$.get("sentiments",function(data){
	
	var keys = {};
	var dist = {};
	keys = Object.keys(data.classifier.wordFrequencyCount);
		for(i=0;i<keys.length;i++){
			dist[keys[i]] = _.chain(data.classifier.wordFrequencyCount[keys[i]]).pairs().sortBy(function(pair){return pair[1];}).value().splice(7,3);
		}
	console.log(keys,dist)
	if(callback)
		callback();
	});
}

</script>

</body>
</html>